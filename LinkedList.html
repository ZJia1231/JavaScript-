<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        function LinkedList() {
            let Node = function (element) {
                this.element = element;
                this.next = null;
            }

            let length = 0;
            let head = null;

            this.append = function (element) {
                let node = new Node(element),
                    current;
                if (head === null) {
                    head = node;
                }
                else {
                    current = head;

                    while (current.next) {
                        current = current.next;
                    }

                    current.next = node;
                }

                length++;
            }
            this.insert = function (position, element) {
                if (position > -1 && position <= length) {
                    let node = new Node(element),
                        current = head, previous,
                        index = 0;

                    if (position == 0) {
                        node.next = current;
                        head = node;
                    }
                    else {
                        while (index++ != position) {
                            previous = current;
                            current = current.next;
                        }
                        node.next = current;
                        previous.next = node;
                    }

                    length++;
                    return true;

                }
                else {
                    return false;
                }
            }
            this.removeAt = function (position) {
                if (position > -1 && position < length) {
                    let current = head,
                        previous,
                        index = 0;

                    if (position === 0) {
                        head = current.next;
                    }
                    else {
                        while (index++ < position) {
                            previous = current;
                            current = current.next;
                        }
                        previous.next = current.next;
                    }
                    length--;
                    return current.element;
                }
                else {
                    return null;
                }
            }
            this.remove = function (element) {
                let current = head,
                    previous;
                if (head.element === element) {
                    head = current.next;
                    return true;
                }
                while (current) {
                    if (current.element == element) {
                        previous.next = current.next;
                        return true;
                    }
                    previous = current;
                    current = current.next;
                }
                return false;
            }
            this.indexOf = function (element) {
                let current = head,
                    index = -1;
                while (current) {
                    if (current.element === element) {
                        return index;
                    }
                    index++;
                    current = current.next;
                }
                return -1;
            }
            this.isEmpty = function () {
                return length === 0;
            }
            this.size = function () {
                return length;
            }
            this.getHead = function () {
                return head;
            }
            this.toString = function () {
                let current = head,
                    string = '';

                while (current) {
                    string += current.element + (current.next ? '->' : '');
                    current = current.next;
                }
                return string;
            }
            this.print = function () {
                console.log(this.toString());
            }
        }

        let list = new LinkedList();
        list.append(5);
        list.append(50);
        list.append(20);
        console.log('往链表里添加5,50,20后：');
        list.print();
        list.insert(2, 10);
        console.log('在位置2插入10后：');
        list.print();
        console.log('列表的长度为：' + list.size());
        list.remove(5);
        console.log('删除5后：');
        list.print();
    </script>
</body>

</html>